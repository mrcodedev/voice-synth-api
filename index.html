<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    body {
      background-color: green;
    }
  </style>
</head>
<body>
  <div class="wrapper__synth">
    <select id="voice" name="voice">
      <option value="">Selecciona una voz</option>
    </select>

    <label for="rate">Velocidad:</label>
    <input name="rate" type="range" value="1"  min="0" max="2" step="0.1" />

    <label for="pitch">Pitch:</label>
    <input name="pitch" type="range" value="1" min="0.1" max="2" step="0.1" />

    <textarea name="text">Hola, soy una voz sintética y digo este texto</textarea>

    <button id="speak">Hablar</button>
    <button id="stop">Parar</button>

    <button id="pause">Pause</button>
    <button id="resume">Resume</button>
  </div>

  <script>
    const utterance = new SpeechSynthesisUtterance();
    let voices = [];
    let voicesDropDown = document.querySelector('[name="voice"]');
    const range = document.querySelector('[name="rate"]');
    const pitch = document.querySelector('[name="pitch"]');
    const text = document.querySelector('[name="text"]')
    const speakButton = document.querySelector("#speak");
    const stopButton = document.querySelector("#stop");

    const pauseButton = document.querySelector("#pause");
    const resumeButton = document.querySelector("#resume");

    const languageDictionary = (language) => {
      const languages = {
        "de-DE": "Alemán",
        "en-US": "Inglés (Estados Unidos)",
        "en-GB": "Inglés (Gran Bretaña)",
        "es-US": "Español (Estados Unidos)",
        "es-ES": "Español (España)",
        "fr-FR": "Francés",
        "hi-IN": "Hindi",
        "id-ID": "Indonesio",
        "it-IT": "Italiano",
        "ja-JP": "Japonés",
        "ko-KR": "Koreano",
        "nl-NL": "Holandés",
        "pl-PL": "Polaco",
        "pt-BR": "Portugués (Brasil)",
        "ru-RU": "Ruso",
        "zh-CN": "Chino (Singapur)",
        "zh-HK": "Chino (Hong Kong)",
        "zh-TW": "Chino (Taiwan)",
        "sv-SE": "Sueco (Suecia)",
        "fr-CA": "Francés (Canadá)",
        "he-IL": "Hebreo (País ficticio llamado Israel)",
        "es-AR": "Español (Argentina)",
        "nl-BE": "Francés (Bélgica)",
        "en": "Inglés",
        "ro-RO": "Rumano (Rumanía)",
        "pt-PT": "Portugués (Portugal)",
        "es-MX": "Español (México)",
        "th-TH": "Tailandés (Tailandia)",
        "en-AU": "Inglés (Australia)",
        "sk-SK": "Eslovaco (Eslovaquia)",
        "ar-SA": "Árabe (Arabia Saudita)",
        "hu-HU": "Húngaro (Hungría)",
        "el-GR": "Griego (Grecia)",
        "en-IE": "Inglés (Irlanda)",
        "nb-NO": "Noruego (Noruega)",
        "en-IN": "Inglés (India)",
        "da-DK": "Danés (Dinamarca)",
        "fi-FI": "Finés (Finlandia)",
        "en-ZA": "Inglés (Sudáfrica)",
        "tr-TR": "Turco (Turquía)",
        "cs-CZ": "Checo (República Checa)"
      }

      return languages[language] || language
    }

    const setText = () => {
      utterance.text = text.value;
    }

    const getVoices =  () => {
      voices = speechSynthesis.getVoices();
    }

    const setListVoices = () => {
      voicesDropDown.innerHTML = voices
        .map(({name, lang}, index) => `<option value="${name}"}>${name} - ${languageDictionary(lang)}</option>`)
    }
    
    // VOICE ACTIONS
    const speak = () => {
      speechSynthesis.speak(utterance)
    }
    
    const speakResume = () => {
      speechSynthesis.resume()
    }
    
    const speakPause = () => {
      speechSynthesis.pause()
    }
    
    const speakCancel = () => {
      speechSynthesis.cancel()
    }
  
    //SET VOICE PARAMETERS
    const setVoice = () => {
      utterance.voice = voices.find(({name}) => name === voicesDropDown.value)
    }

    const setRange = (name , value) => {
      utterance[name] = value
    }


    const init = () => {
      getVoices()
      setListVoices()
      setVoice()
      setText()
    }
    
    speechSynthesis.onvoiceschanged = () => init()
    voicesDropDown.onchange = () => setVoice()
    range.onchange = () => setRange(range.name, range.value)
    pitch.onchange = () => setRange(pitch.name, pitch.value)
    text.oninput = () => setText()

    speakButton.onclick = () => speak()
    stopButton.onclick = () => speakCancel()
    pauseButton.onclick = () =>  speakPause()
    resumeButton.onclick = () =>  speakResume()
  </script>
</body>
</html>